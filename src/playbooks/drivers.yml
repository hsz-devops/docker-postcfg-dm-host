---

- name: prepae folder structure
  file:
    path: /usr/local/src/hsz
    state: directory

# ---------------------------------------------------------------
# - name: "REX-Ray: vendor agnostic storage orchestration engine."
#   become: true
#   shell:  curl -sSL https://dl.bintray.com/emccode/rexray/install | sh -
#   args:
#     chdir: /tmp

- name: "REX-Ray: vendor agnostic storage orchestration engine (1)"
  become: true
  get_url:
    url: https://dl.bintray.com/emccode/rexray/install
    dest: /usr/local/src/hsz/rex-ray-install.sh
  register: rexray_download_status

- name: "REX-Ray: vendor agnostic storage orchestration engine (2)"
  become: true
  shell: bash /usr/local/src/hsz/rex-ray-install.sh
  when: rexray_download_status.changed

# ---------------------------------------------------------------
- name: pre-requisites for NFS/CIFS plugin
  become: true
  apt:
    name: "{{ item }}"
    state: latest
  with_items:
    - nfs-common
    - cifs-utils

# ---------------------------------------------------------------
- name: "NetShare: Docker NFS, AWS EFS & Samba/CIFS Volume Plugin (1)"
  become: true
  get_url:
    url: https://github.com/gondor/docker-volume-netshare/releases/download/v0.16/docker-volume-netshare_0.16_amd64.deb
    dest: /usr/local/src/hsz/docker-volume-netshare_0.16_amd64.deb
  register: netshare_status

- name: "NetShare: Docker NFS, AWS EFS & Samba/CIFS Volume Plugin (1)"
  become: true
  apt:
    deb: /usr/local/src/hsz/docker-volume-netshare_0.16_amd64.deb
  when: netshare_status.changed

# # ---------------------------------------------------------------
# - name: "Docker Volume Driver for Azure File Storage"
#   become: true
#   ....
